---
title: JupyterLab + Claude Code
description: An MCP server for real-time Jupyter notebook collaboration with Claude Code. Changes sync instantly — no reloading.
---

import { Steps, Aside } from "@astrojs/starlight/components";

An MCP server that lets Claude Code read, edit, and execute Jupyter notebooks with real-time collaboration. Changes appear instantly in your browser — no reloading. Claude sees where your cursor is and won't touch the cell you're editing.

{/* TODO: Add demo GIF here */}
{/* <img src="/demo.gif" alt="Demo of Claude Code editing a notebook in real-time" /> */}

## Install

### Prerequisites

- **JupyterLab 4.x** with `jupyter-collaboration` installed
- **Claude Code**

```bash
# Install jupyter-collaboration if you don't have it
pip install jupyter-collaboration
```

<Aside type="tip">
  Use the [`jupyter-claude` launcher](/jupyter-claude/) to skip manual extension
  setup — it auto-installs `jupyter-collaboration` and other useful extensions.
</Aside>

### Setup

<Steps>

1. **Register the MCP server with Claude Code**

   Pick one of three options:

   **With npx (recommended)** — requires [Node.js 18+](https://nodejs.org/):

   ```bash
   claude mcp add -s user jupyter -- npx jupyterlab-claude-code
   ```

   **With uvx (no Node.js required)** — uses the [`deno`](https://pypi.org/project/deno/) PyPI package:

   ```bash
   claude mcp add -s user jupyter -- uvx deno -A npm:jupyterlab-claude-code
   ```

   **From source (development)**:

   ```bash
   git clone https://github.com/ianhi/jupyterlab-claude-code.git
   cd jupyterlab-claude-code
   npm install && npm run build
   claude mcp add -s user jupyter -- node $PWD/dist/index.js
   ```

   The `-s user` flag makes it available across all projects.

2. **Start JupyterLab**

   ```bash
   jupyter lab
   ```

   Or use the [`jupyter-claude` launcher](/jupyter-claude/) for automatic extension management.

4. **Connect from Claude Code**

   Copy the URL from JupyterLab's terminal output (including the token), then tell Claude:

   > Connect to http://localhost:8888/lab?token=abc123

</Steps>

## What's special

- **Real-time sync** — edits appear instantly in JupyterLab via y-websocket, and vice versa
- **51 MCP tools** — read, edit, execute, search, diff, tag, lock, snapshot, and more
- **Cell ID addressing** — stable references that survive insertions and deletions
- **Multi-agent ready** — cell locking, change tracking, named snapshots, and per-agent attribution
- **Context-efficient** — filter by cell type, skip outputs, limit images to keep Claude focused
- **No extension needed** — uses JupyterLab's built-in `jupyter-collaboration` system

## How it works

```
Claude Code  ←—stdio—→  MCP Server  ←—y-websocket—→  JupyterLab
```

The MCP server connects to JupyterLab's existing real-time collaboration system using the same protocol the browser frontend uses. No custom server extensions required.

### Dual mode

Most tools work in two modes automatically:

- **Jupyter mode** — Connect via `connect_jupyter` for real-time sync and kernel execution. Changes appear instantly in the browser.
- **Filesystem mode** — Read and write `.ipynb` files directly without JupyterLab running. No kernel operations, but useful for offline editing.

You don't need to choose — if you're connected, tools use Jupyter mode. Otherwise they fall back to filesystem mode.

## First steps

Once connected, try:

- _"Read the notebook analysis.ipynb"_ — uses `get_notebook_content`
- _"Run cell 3"_ — uses `execute_cell`
- _"Add a cell that imports pandas"_ — uses `insert_cell`
- _"Search for any cells with errors"_ — uses `search_notebook`

See the [Tool Reference](/tools/) for the full list of 51 tools.

## Built by dogfooding with Claude

This project was developed using itself. Each feature was tested by having Claude agents use it to do real notebook work — not synthetic tests, but actual data science tasks. The agents reported back what was missing, broken, or awkward, and those reports directly drove the roadmap.

### Round 1: Single agent, basic tools

One Claude agent built a notebook from scratch. It immediately revealed that positional indices are fragile — inserting a cell shifts every index below it. This led to **cell ID addressing**: stable 8-character IDs that survive insertions and deletions.

### Round 2: Human + agent collaboration

Working alongside a human in the same notebook exposed a key problem: Claude would overwrite cells the human was actively editing. This led to **cursor awareness** (`get_user_focus`) and **human-focus protection** — write tools now check the JupyterLab awareness protocol and refuse to modify cells a human is typing in.

### Round 3: Agent teams (Lorenz attractor)

Six Claude agents worked simultaneously across four notebooks to simulate and analyze a Lorenz attractor. An ETL agent loaded data, a model agent computed Lyapunov exponents (getting 0.9069 — real math!), a visualization agent built plots, and an adversary agent deliberately tried to corrupt other agents' work. This round exposed that `copy_cells` operations weren't being tracked in the change log and that lock TTLs were too short. Both were fixed.

### Round 4: Concurrent writes to the same notebook

Five agents all wrote to the same two notebooks simultaneously — a weather station dashboard. This was the stress test for the collaboration system. Results: 31 cells, 39 tracked versions, true same-second concurrent writes, zero cell ID collisions, zero data loss. The adversary agent confirmed lock enforcement worked (4/4 blocked). A deleted cell was successfully recovered with full content preservation.

Each round, every agent wrote a feedback report. Their suggestions directly produced features like `batch_insert_cells`, the `client_name` attribution parameter, and the 10-minute default lock TTL. The [multi-agent guide](/guides/multi-agent/) documents the patterns that emerged from this process.

## Development

```bash
# Test RTC connection without restarting Claude Code
JUPYTER_TOKEN=xxx npx tsx src/test.ts

# Build the MCP server
npm run build

# Watch mode (auto-rebuild on changes)
npm run watch

# Run tests
npm test
```

<Aside type="caution">
  After `npm run build`, you must **restart Claude Code** for tool schema
  changes to take effect. The MCP server process caches tool definitions at
  startup.
</Aside>
